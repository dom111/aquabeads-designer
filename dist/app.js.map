{
  "version": 3,
  "sources": ["../node_modules/css-what/lib/es/types.js", "../node_modules/css-what/lib/es/parse.js", "../src/components/Element.ts", "../src/components/Actions/Clear.ts", "../src/components/Actions/GenerateLink.ts", "../src/lib/colour.ts", "../src/lib/colourSamplers.ts", "../src/lib/ImageToGridData.ts", "../src/components/Picker.ts", "../src/components/Actions/ImportImage.ts", "../src/components/Actions/Print.ts", "../src/components/Actions/Share.ts", "../src/components/Actions.ts", "../src/components/Cell.ts", "../src/components/Board.ts", "../src/components/Footer.ts", "../src/lib/Base64.ts", "../src/lib/Compression.ts", "../src/lib/State.ts", "../src/app.ts"],
  "sourcesContent": ["export var SelectorType;\n(function (SelectorType) {\n    SelectorType[\"Attribute\"] = \"attribute\";\n    SelectorType[\"Pseudo\"] = \"pseudo\";\n    SelectorType[\"PseudoElement\"] = \"pseudo-element\";\n    SelectorType[\"Tag\"] = \"tag\";\n    SelectorType[\"Universal\"] = \"universal\";\n    // Traversals\n    SelectorType[\"Adjacent\"] = \"adjacent\";\n    SelectorType[\"Child\"] = \"child\";\n    SelectorType[\"Descendant\"] = \"descendant\";\n    SelectorType[\"Parent\"] = \"parent\";\n    SelectorType[\"Sibling\"] = \"sibling\";\n    SelectorType[\"ColumnCombinator\"] = \"column-combinator\";\n})(SelectorType || (SelectorType = {}));\n/**\n * Modes for ignore case.\n *\n * This could be updated to an enum, and the object is\n * the current stand-in that will allow code to be updated\n * without big changes.\n */\nexport const IgnoreCaseMode = {\n    Unknown: null,\n    QuirksMode: \"quirks\",\n    IgnoreCase: true,\n    CaseSensitive: false,\n};\nexport var AttributeAction;\n(function (AttributeAction) {\n    AttributeAction[\"Any\"] = \"any\";\n    AttributeAction[\"Element\"] = \"element\";\n    AttributeAction[\"End\"] = \"end\";\n    AttributeAction[\"Equals\"] = \"equals\";\n    AttributeAction[\"Exists\"] = \"exists\";\n    AttributeAction[\"Hyphen\"] = \"hyphen\";\n    AttributeAction[\"Not\"] = \"not\";\n    AttributeAction[\"Start\"] = \"start\";\n})(AttributeAction || (AttributeAction = {}));\n", "import { SelectorType, AttributeAction, } from \"./types\";\nconst reName = /^[^\\\\#]?(?:\\\\(?:[\\da-f]{1,6}\\s?|.)|[\\w\\-\\u00b0-\\uFFFF])+/;\nconst reEscape = /\\\\([\\da-f]{1,6}\\s?|(\\s)|.)/gi;\nconst actionTypes = new Map([\n    [126 /* Tilde */, AttributeAction.Element],\n    [94 /* Circumflex */, AttributeAction.Start],\n    [36 /* Dollar */, AttributeAction.End],\n    [42 /* Asterisk */, AttributeAction.Any],\n    [33 /* ExclamationMark */, AttributeAction.Not],\n    [124 /* Pipe */, AttributeAction.Hyphen],\n]);\n// Pseudos, whose data property is parsed as well.\nconst unpackPseudos = new Set([\n    \"has\",\n    \"not\",\n    \"matches\",\n    \"is\",\n    \"where\",\n    \"host\",\n    \"host-context\",\n]);\n/**\n * Checks whether a specific selector is a traversal.\n * This is useful eg. in swapping the order of elements that\n * are not traversals.\n *\n * @param selector Selector to check.\n */\nexport function isTraversal(selector) {\n    switch (selector.type) {\n        case SelectorType.Adjacent:\n        case SelectorType.Child:\n        case SelectorType.Descendant:\n        case SelectorType.Parent:\n        case SelectorType.Sibling:\n        case SelectorType.ColumnCombinator:\n            return true;\n        default:\n            return false;\n    }\n}\nconst stripQuotesFromPseudos = new Set([\"contains\", \"icontains\"]);\n// Unescape function taken from https://github.com/jquery/sizzle/blob/master/src/sizzle.js#L152\nfunction funescape(_, escaped, escapedWhitespace) {\n    const high = parseInt(escaped, 16) - 0x10000;\n    // NaN means non-codepoint\n    return high !== high || escapedWhitespace\n        ? escaped\n        : high < 0\n            ? // BMP codepoint\n                String.fromCharCode(high + 0x10000)\n            : // Supplemental Plane codepoint (surrogate pair)\n                String.fromCharCode((high >> 10) | 0xd800, (high & 0x3ff) | 0xdc00);\n}\nfunction unescapeCSS(str) {\n    return str.replace(reEscape, funescape);\n}\nfunction isQuote(c) {\n    return c === 39 /* SingleQuote */ || c === 34 /* DoubleQuote */;\n}\nfunction isWhitespace(c) {\n    return (c === 32 /* Space */ ||\n        c === 9 /* Tab */ ||\n        c === 10 /* NewLine */ ||\n        c === 12 /* FormFeed */ ||\n        c === 13 /* CarriageReturn */);\n}\n/**\n * Parses `selector`, optionally with the passed `options`.\n *\n * @param selector Selector to parse.\n * @param options Options for parsing.\n * @returns Returns a two-dimensional array.\n * The first dimension represents selectors separated by commas (eg. `sub1, sub2`),\n * the second contains the relevant tokens for that selector.\n */\nexport function parse(selector) {\n    const subselects = [];\n    const endIndex = parseSelector(subselects, `${selector}`, 0);\n    if (endIndex < selector.length) {\n        throw new Error(`Unmatched selector: ${selector.slice(endIndex)}`);\n    }\n    return subselects;\n}\nfunction parseSelector(subselects, selector, selectorIndex) {\n    let tokens = [];\n    function getName(offset) {\n        const match = selector.slice(selectorIndex + offset).match(reName);\n        if (!match) {\n            throw new Error(`Expected name, found ${selector.slice(selectorIndex)}`);\n        }\n        const [name] = match;\n        selectorIndex += offset + name.length;\n        return unescapeCSS(name);\n    }\n    function stripWhitespace(offset) {\n        selectorIndex += offset;\n        while (selectorIndex < selector.length &&\n            isWhitespace(selector.charCodeAt(selectorIndex))) {\n            selectorIndex++;\n        }\n    }\n    function readValueWithParenthesis() {\n        selectorIndex += 1;\n        const start = selectorIndex;\n        let counter = 1;\n        for (; counter > 0 && selectorIndex < selector.length; selectorIndex++) {\n            if (selector.charCodeAt(selectorIndex) ===\n                40 /* LeftParenthesis */ &&\n                !isEscaped(selectorIndex)) {\n                counter++;\n            }\n            else if (selector.charCodeAt(selectorIndex) ===\n                41 /* RightParenthesis */ &&\n                !isEscaped(selectorIndex)) {\n                counter--;\n            }\n        }\n        if (counter) {\n            throw new Error(\"Parenthesis not matched\");\n        }\n        return unescapeCSS(selector.slice(start, selectorIndex - 1));\n    }\n    function isEscaped(pos) {\n        let slashCount = 0;\n        while (selector.charCodeAt(--pos) === 92 /* BackSlash */)\n            slashCount++;\n        return (slashCount & 1) === 1;\n    }\n    function ensureNotTraversal() {\n        if (tokens.length > 0 && isTraversal(tokens[tokens.length - 1])) {\n            throw new Error(\"Did not expect successive traversals.\");\n        }\n    }\n    function addTraversal(type) {\n        if (tokens.length > 0 &&\n            tokens[tokens.length - 1].type === SelectorType.Descendant) {\n            tokens[tokens.length - 1].type = type;\n            return;\n        }\n        ensureNotTraversal();\n        tokens.push({ type });\n    }\n    function addSpecialAttribute(name, action) {\n        tokens.push({\n            type: SelectorType.Attribute,\n            name,\n            action,\n            value: getName(1),\n            namespace: null,\n            ignoreCase: \"quirks\",\n        });\n    }\n    /**\n     * We have finished parsing the current part of the selector.\n     *\n     * Remove descendant tokens at the end if they exist,\n     * and return the last index, so that parsing can be\n     * picked up from here.\n     */\n    function finalizeSubselector() {\n        if (tokens.length &&\n            tokens[tokens.length - 1].type === SelectorType.Descendant) {\n            tokens.pop();\n        }\n        if (tokens.length === 0) {\n            throw new Error(\"Empty sub-selector\");\n        }\n        subselects.push(tokens);\n    }\n    stripWhitespace(0);\n    if (selector.length === selectorIndex) {\n        return selectorIndex;\n    }\n    loop: while (selectorIndex < selector.length) {\n        const firstChar = selector.charCodeAt(selectorIndex);\n        switch (firstChar) {\n            // Whitespace\n            case 32 /* Space */:\n            case 9 /* Tab */:\n            case 10 /* NewLine */:\n            case 12 /* FormFeed */:\n            case 13 /* CarriageReturn */: {\n                if (tokens.length === 0 ||\n                    tokens[0].type !== SelectorType.Descendant) {\n                    ensureNotTraversal();\n                    tokens.push({ type: SelectorType.Descendant });\n                }\n                stripWhitespace(1);\n                break;\n            }\n            // Traversals\n            case 62 /* GreaterThan */: {\n                addTraversal(SelectorType.Child);\n                stripWhitespace(1);\n                break;\n            }\n            case 60 /* LessThan */: {\n                addTraversal(SelectorType.Parent);\n                stripWhitespace(1);\n                break;\n            }\n            case 126 /* Tilde */: {\n                addTraversal(SelectorType.Sibling);\n                stripWhitespace(1);\n                break;\n            }\n            case 43 /* Plus */: {\n                addTraversal(SelectorType.Adjacent);\n                stripWhitespace(1);\n                break;\n            }\n            // Special attribute selectors: .class, #id\n            case 46 /* Period */: {\n                addSpecialAttribute(\"class\", AttributeAction.Element);\n                break;\n            }\n            case 35 /* Hash */: {\n                addSpecialAttribute(\"id\", AttributeAction.Equals);\n                break;\n            }\n            case 91 /* LeftSquareBracket */: {\n                stripWhitespace(1);\n                // Determine attribute name and namespace\n                let name;\n                let namespace = null;\n                if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */) {\n                    // Equivalent to no namespace\n                    name = getName(1);\n                }\n                else if (selector.startsWith(\"*|\", selectorIndex)) {\n                    namespace = \"*\";\n                    name = getName(2);\n                }\n                else {\n                    name = getName(0);\n                    if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */ &&\n                        selector.charCodeAt(selectorIndex + 1) !==\n                            61 /* Equal */) {\n                        namespace = name;\n                        name = getName(1);\n                    }\n                }\n                stripWhitespace(0);\n                // Determine comparison operation\n                let action = AttributeAction.Exists;\n                const possibleAction = actionTypes.get(selector.charCodeAt(selectorIndex));\n                if (possibleAction) {\n                    action = possibleAction;\n                    if (selector.charCodeAt(selectorIndex + 1) !==\n                        61 /* Equal */) {\n                        throw new Error(\"Expected `=`\");\n                    }\n                    stripWhitespace(2);\n                }\n                else if (selector.charCodeAt(selectorIndex) === 61 /* Equal */) {\n                    action = AttributeAction.Equals;\n                    stripWhitespace(1);\n                }\n                // Determine value\n                let value = \"\";\n                let ignoreCase = null;\n                if (action !== \"exists\") {\n                    if (isQuote(selector.charCodeAt(selectorIndex))) {\n                        const quote = selector.charCodeAt(selectorIndex);\n                        let sectionEnd = selectorIndex + 1;\n                        while (sectionEnd < selector.length &&\n                            (selector.charCodeAt(sectionEnd) !== quote ||\n                                isEscaped(sectionEnd))) {\n                            sectionEnd += 1;\n                        }\n                        if (selector.charCodeAt(sectionEnd) !== quote) {\n                            throw new Error(\"Attribute value didn't end\");\n                        }\n                        value = unescapeCSS(selector.slice(selectorIndex + 1, sectionEnd));\n                        selectorIndex = sectionEnd + 1;\n                    }\n                    else {\n                        const valueStart = selectorIndex;\n                        while (selectorIndex < selector.length &&\n                            ((!isWhitespace(selector.charCodeAt(selectorIndex)) &&\n                                selector.charCodeAt(selectorIndex) !==\n                                    93 /* RightSquareBracket */) ||\n                                isEscaped(selectorIndex))) {\n                            selectorIndex += 1;\n                        }\n                        value = unescapeCSS(selector.slice(valueStart, selectorIndex));\n                    }\n                    stripWhitespace(0);\n                    // See if we have a force ignore flag\n                    const forceIgnore = selector.charCodeAt(selectorIndex) | 0x20;\n                    // If the forceIgnore flag is set (either `i` or `s`), use that value\n                    if (forceIgnore === 115 /* LowerS */) {\n                        ignoreCase = false;\n                        stripWhitespace(1);\n                    }\n                    else if (forceIgnore === 105 /* LowerI */) {\n                        ignoreCase = true;\n                        stripWhitespace(1);\n                    }\n                }\n                if (selector.charCodeAt(selectorIndex) !==\n                    93 /* RightSquareBracket */) {\n                    throw new Error(\"Attribute selector didn't terminate\");\n                }\n                selectorIndex += 1;\n                const attributeSelector = {\n                    type: SelectorType.Attribute,\n                    name,\n                    action,\n                    value,\n                    namespace,\n                    ignoreCase,\n                };\n                tokens.push(attributeSelector);\n                break;\n            }\n            case 58 /* Colon */: {\n                if (selector.charCodeAt(selectorIndex + 1) === 58 /* Colon */) {\n                    tokens.push({\n                        type: SelectorType.PseudoElement,\n                        name: getName(2).toLowerCase(),\n                        data: selector.charCodeAt(selectorIndex) ===\n                            40 /* LeftParenthesis */\n                            ? readValueWithParenthesis()\n                            : null,\n                    });\n                    continue;\n                }\n                const name = getName(1).toLowerCase();\n                let data = null;\n                if (selector.charCodeAt(selectorIndex) ===\n                    40 /* LeftParenthesis */) {\n                    if (unpackPseudos.has(name)) {\n                        if (isQuote(selector.charCodeAt(selectorIndex + 1))) {\n                            throw new Error(`Pseudo-selector ${name} cannot be quoted`);\n                        }\n                        data = [];\n                        selectorIndex = parseSelector(data, selector, selectorIndex + 1);\n                        if (selector.charCodeAt(selectorIndex) !==\n                            41 /* RightParenthesis */) {\n                            throw new Error(`Missing closing parenthesis in :${name} (${selector})`);\n                        }\n                        selectorIndex += 1;\n                    }\n                    else {\n                        data = readValueWithParenthesis();\n                        if (stripQuotesFromPseudos.has(name)) {\n                            const quot = data.charCodeAt(0);\n                            if (quot === data.charCodeAt(data.length - 1) &&\n                                isQuote(quot)) {\n                                data = data.slice(1, -1);\n                            }\n                        }\n                        data = unescapeCSS(data);\n                    }\n                }\n                tokens.push({ type: SelectorType.Pseudo, name, data });\n                break;\n            }\n            case 44 /* Comma */: {\n                finalizeSubselector();\n                tokens = [];\n                stripWhitespace(1);\n                break;\n            }\n            default: {\n                if (selector.startsWith(\"/*\", selectorIndex)) {\n                    const endIndex = selector.indexOf(\"*/\", selectorIndex + 2);\n                    if (endIndex < 0) {\n                        throw new Error(\"Comment was not terminated\");\n                    }\n                    selectorIndex = endIndex + 2;\n                    // Remove leading whitespace\n                    if (tokens.length === 0) {\n                        stripWhitespace(0);\n                    }\n                    break;\n                }\n                let namespace = null;\n                let name;\n                if (firstChar === 42 /* Asterisk */) {\n                    selectorIndex += 1;\n                    name = \"*\";\n                }\n                else if (firstChar === 124 /* Pipe */) {\n                    name = \"\";\n                    if (selector.charCodeAt(selectorIndex + 1) === 124 /* Pipe */) {\n                        addTraversal(SelectorType.ColumnCombinator);\n                        stripWhitespace(2);\n                        break;\n                    }\n                }\n                else if (reName.test(selector.slice(selectorIndex))) {\n                    name = getName(0);\n                }\n                else {\n                    break loop;\n                }\n                if (selector.charCodeAt(selectorIndex) === 124 /* Pipe */ &&\n                    selector.charCodeAt(selectorIndex + 1) !== 124 /* Pipe */) {\n                    namespace = name;\n                    if (selector.charCodeAt(selectorIndex + 1) ===\n                        42 /* Asterisk */) {\n                        name = \"*\";\n                        selectorIndex += 2;\n                    }\n                    else {\n                        name = getName(1);\n                    }\n                }\n                tokens.push(name === \"*\"\n                    ? { type: SelectorType.Universal, namespace }\n                    : { type: SelectorType.Tag, name, namespace });\n            }\n        }\n    }\n    finalizeSubselector();\n    return selectorIndex;\n}\n", "import { parse } from 'css-what';\n\nexport const empty = (element: HTMLElement): void => {\n  while (element.hasChildNodes()) {\n    element.firstChild.remove();\n  }\n};\n\nexport const h = <T extends HTMLElement = HTMLElement>(\n  selector: string,\n  ...childNodes: (Node | Element)[]\n): T => {\n  const [element] = parse(selector).map((selectors) =>\n    selectors.reduce((element: HTMLElement | null, details) => {\n      if (element === null && details.type !== 'tag') {\n        element = document.createElement('div');\n      }\n\n      if (details.type === 'tag') {\n        return document.createElement(details.name);\n      }\n\n      if (details.type === 'attribute' && details.name !== 'class') {\n        element.setAttribute(details.name, details.value ?? '');\n      }\n\n      if (details.type === 'attribute' && details.name === 'class') {\n        element.classList.add(details.value);\n      }\n\n      return element;\n    }, null)\n  );\n\n  childNodes.forEach((childNode) => {\n    if (childNode instanceof Element) {\n      childNode = childNode.element();\n    }\n\n    element.append(childNode);\n  });\n\n  return element as T;\n};\n\nexport const on:\n  | (<K extends keyof GlobalEventHandlersEventMap>(\n      target: EventTarget,\n      event: K,\n      handler: (event: GlobalEventHandlersEventMap[K]) => void,\n      options?: boolean | AddEventListenerOptions\n    ) => any)\n  | ((\n      element: EventTarget,\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions\n    ) => any) = (target, event, handler, options): void =>\n  target.addEventListener(event, handler, options);\n\nexport const onEach:\n  | (<K extends keyof GlobalEventHandlersEventMap>(\n      target: EventTarget,\n      events: K[],\n      handler: (event: GlobalEventHandlersEventMap[K]) => void,\n      options?: boolean | AddEventListenerOptions\n    ) => any)\n  | ((\n      target: EventTarget,\n      type: string[],\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions\n    ) => any) = (target, events, handler, options): any => {\n  events.forEach((event) => on(target, event, handler, options));\n};\n\nexport const t = (content: string): Text => document.createTextNode(content);\n\nexport class Element {\n  #element: HTMLElement;\n\n  constructor(selector: string, ...childNodes: Node[]) {\n    this.#element = h(selector, ...childNodes);\n  }\n\n  addClass(...classes: string[]): void {\n    this.element().classList.add(...classes);\n  }\n\n  append(...nodes: (Node | Element)[]): void {\n    nodes.forEach((node) => {\n      if (node instanceof Element) {\n        node = node.element();\n      }\n\n      this.element().append(node);\n    });\n  }\n\n  element(): HTMLElement {\n    return this.#element;\n  }\n\n  empty(): void {\n    empty(this.element());\n  }\n\n  on<K extends keyof GlobalEventHandlersEventMap>(\n    event: K,\n    handler: (event: GlobalEventHandlersEventMap[K]) => void,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  on(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  on(event, handler, options): void {\n    on(this.element(), event, handler, options);\n  }\n\n  onEach<K extends keyof GlobalEventHandlersEventMap>(\n    events: K[],\n    handler: (event: GlobalEventHandlersEventMap[K]) => void,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  onEach(\n    type: string[],\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ): void;\n  onEach(events, handler, options): void {\n    onEach(this.element(), events, handler, options);\n  }\n\n  removeClass(...classes: string[]): void {\n    this.element().classList.remove(...classes);\n  }\n}\n\nexport default Element;\n", "import Element, { t } from '../Element';\nimport Board from '../Board';\n\nexport class Clear extends Element {\n  constructor(board: Board) {\n    super('button.clear[title=\"Clear\"]', t('\u274C'));\n\n    this.onEach(['mousedown', 'touchstart'], () => {\n      board.clear();\n\n      window.location.hash = '';\n    });\n  }\n}\n\nexport default Clear;\n", "import Element, { on, t } from '../Element';\nimport State from '../../lib/State';\n\nexport class GenerateLink extends Element {\n  #state: State;\n\n  constructor(state: State) {\n    super('button.link[title=\"Generate link\"]', t('\uD83D\uDD17'));\n\n    this.#state = state;\n\n    this.bindEvents();\n  }\n\n  private bindEvents(): void {\n    this.onEach(['mousedown', 'touchstart'], () => this.saveState());\n\n    on(document, 'keydown', (event) => {\n      if (['S', 's'].includes(event.key) && event.ctrlKey) {\n        this.saveState();\n\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    });\n  }\n\n  private saveState(): void {\n    this.#state.toString().then((hash) => (window.location.hash = '#' + hash));\n  }\n}\n\nexport default GenerateLink;\n", "export type RGB = [number, number, number];\n\nexport const rgbToHex = ([r, g, b]: RGB): string =>\n  '#' + (r * 256 ** 2 + g * 256 + b).toString(16).padStart(6, '0');\n\nexport const hexToRgb = (hex: string): RGB =>\n  hex\n    .slice(1)\n    .match(/../g)\n    .map((chunk) => parseInt(chunk, 16)) as RGB;\n\nconst brightnessCache: { [key: string]: number } = {};\n\n// from https://www.nbdtech.com/Blog/archive/2008/04/27/Calculating-the-Perceived-Brightness-of-a-Color.aspx\nexport const perceivedBrightness = (hex: string): number => {\n  if (!(hex in brightnessCache)) {\n    const [r, g, b] = hexToRgb(hex);\n\n    brightnessCache[hex] = Math.floor(\n      Math.sqrt(r * r * 0.241 + g * g * 0.691 + b * b * 0.068)\n    );\n  }\n\n  return brightnessCache[hex];\n};\n", "import { perceivedBrightness, rgbToHex } from './colour';\nimport { ColourSampler } from './ImageToGridData';\n\nconst colourSampler =\n  (sort: ([aHex, aFrequency], [bHex, bFrequency]) => number): ColourSampler =>\n  ({ data }): string => {\n    const colours: { [key: string]: number } = {};\n\n    for (let i = 0, end = data.length; i < end; i += 4) {\n      const isTransparent = data[i + 3] === 0,\n        hex = isTransparent\n          ? 'transparent'\n          : rgbToHex([data[i], data[i + 1], data[i + 2]]);\n\n      if (!(hex in colours)) {\n        colours[hex] = 0;\n      }\n\n      colours[hex]++;\n    }\n\n    const [chosen] = Object.entries(colours).sort(sort);\n\n    return chosen[0];\n  };\n\nexport const brighterAndDarker: ColourSampler = colourSampler(\n  ([aHex, a], [bHex, b]) =>\n    (bHex === 'transparent' ? 0 : Math.abs(perceivedBrightness(bHex) - 127)) -\n    (aHex === 'transparent' ? 0 : Math.abs(perceivedBrightness(aHex) - 127))\n);\n\nexport const brightest: ColourSampler = colourSampler(\n  ([aHex, a], [bHex, b]) =>\n    (bHex === 'transparent' ? 0 : perceivedBrightness(bHex)) -\n    (aHex === 'transparent' ? 0 : perceivedBrightness(aHex))\n);\n\nexport const darkest: ColourSampler = colourSampler(\n  ([aHex, a], [bHex, b]) =>\n    (aHex === 'transparent' ? 255 : perceivedBrightness(aHex)) -\n    (bHex === 'transparent' ? 255 : perceivedBrightness(bHex))\n);\n\nexport const highestFrequency: ColourSampler = colourSampler(\n  ([aHex, a], [bHex, b]) =>\n    b - a ||\n    (aHex === 'transparent' ? 0 : perceivedBrightness(aHex)) -\n      (bHex === 'transparent' ? 0 : perceivedBrightness(bHex))\n);\n", "import Element from '../components/Element';\n\nexport type ColourSampler = (imageData: ImageData) => string;\ntype TargetDimensions = {\n  height: number;\n  width: number;\n};\n\nexport class ImageToGridData extends Element {\n  static async processFile(\n    file: File,\n    targetDimensions: TargetDimensions,\n    colourSampler: ColourSampler\n  ): Promise<string[]> {\n    return new Promise((resolve) => {\n      const fileReader = new FileReader();\n\n      fileReader.addEventListener('load', () => resolve(fileReader.result));\n\n      fileReader.readAsDataURL(file);\n    })\n      .then(\n        (imageDataUrl: string) =>\n          new Promise((resolve, reject) => {\n            const image = new Image();\n\n            image.src =\n              'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKAQMAAAC3/F3+AAAAA1BMVEUAAACnej3aAAAAAXRSTlPHReaPdQAAAApJREFUCNdjwAsAAB4AAdpxxYoAAAAASUVORK5CYII=';\n\n            image.addEventListener('error', (event) => reject(event.error));\n            image.addEventListener('load', () => resolve(image));\n\n            image.src = imageDataUrl;\n          })\n      )\n      .then((image: CanvasImageSource) =>\n        this.processImageData(image, targetDimensions, colourSampler)\n      );\n  }\n\n  static processImageData(\n    imageCanvas: CanvasImageSource,\n    { height: targetHeight, width: targetWidth }: TargetDimensions,\n    colourSampler: ColourSampler\n  ): string[] {\n    const height = imageCanvas.height as number,\n      width = imageCanvas.width as number,\n      squareSize = Math.floor(\n        Math.min(height / targetHeight, width / targetWidth)\n      ),\n      scaledHeight = squareSize * targetHeight,\n      scaledWidth = squareSize * targetWidth,\n      oddOffsetX = (scaledWidth - squareSize) / width / 2,\n      offsetX = (width - scaledWidth) / 2,\n      offsetY = (height - scaledHeight) / 2,\n      canvas = document.createElement('canvas'),\n      context = canvas.getContext('2d'),\n      squareCanvas = document.createElement('canvas'),\n      squareContext = squareCanvas.getContext('2d'),\n      colourData = [];\n\n    squareCanvas.height = squareSize;\n    squareCanvas.width = squareSize;\n    canvas.height = scaledHeight;\n    canvas.width = scaledWidth;\n\n    context.drawImage(imageCanvas, offsetX, offsetY, scaledWidth, scaledHeight);\n\n    for (let y = 0; y < targetHeight; y++) {\n      const rowWidth = targetWidth - (y % 2),\n        rowOffsetX = (y % 2) * oddOffsetX;\n\n      for (let x = 0; x < rowWidth; x++) {\n        const canvasX = offsetX + rowOffsetX + x * squareSize,\n          canvasY = offsetY + y * squareSize;\n\n        squareContext.clearRect(0, 0, squareSize, squareSize);\n        squareContext.drawImage(\n          canvas,\n          canvasX,\n          canvasY,\n          squareSize,\n          squareSize,\n          0,\n          0,\n          squareSize,\n          squareSize\n        );\n\n        const squareImage = new Image();\n\n        squareImage.src = squareCanvas.toDataURL('image/png');\n\n        const colour = colourSampler(\n          squareContext.getImageData(0, 0, squareSize, squareSize)\n        );\n        squareImage.setAttribute('data-colour', colour);\n\n        colourData.push(colour);\n      }\n    }\n\n    return colourData;\n  }\n}\n\nexport default ImageToGridData;\n", "import Element, { onEach, empty, h, on } from './Element';\nimport State from '../lib/State';\n\nexport const TOTAL_RECENT_COLOURS = 16;\n\nexport class Picker extends Element {\n  #input: HTMLInputElement;\n  #recent: HTMLDivElement;\n  #recentColours: string[];\n\n  constructor(state: State) {\n    super('section.picker');\n\n    this.#recentColours = state.palette();\n\n    this.#input = h('input[type=\"color\"]') as HTMLInputElement;\n\n    this.#input.value = this.#recentColours[0];\n\n    this.#recent = h('section.recent') as HTMLDivElement;\n\n    this.append(this.#input, this.#recent);\n\n    this.bindEvents();\n    this.updateRecent();\n  }\n\n  private bindEvents(): void {\n    on(this.#input, 'input', () => this.setCurrentColour(this.#input.value));\n  }\n\n  currentColour(): string {\n    return this.#input.value;\n  }\n\n  setCurrentColour(colour: string): void {\n    if (this.#input.value !== colour) {\n      this.#input.value = colour;\n    }\n\n    const existingIndex = this.#recentColours.indexOf(colour);\n\n    if (existingIndex > -1) {\n      this.#recentColours.splice(existingIndex, 1);\n    }\n\n    this.#recentColours.unshift(colour);\n\n    this.#recentColours.splice(TOTAL_RECENT_COLOURS);\n\n    this.updateRecent();\n  }\n\n  updateRecent(): void {\n    empty(this.#recent);\n\n    this.#recent.append(\n      ...this.#recentColours.map((colour) => {\n        const element = h('button') as HTMLButtonElement;\n\n        element.style.backgroundColor = colour;\n\n        onEach(\n          element,\n          ['mousedown', 'touchstart'],\n          () => (this.#input.value = colour)\n        );\n\n        return element;\n      })\n    );\n  }\n}\n\nexport default Picker;\n", "import Element, { h, t } from '../Element';\nimport {\n  brighterAndDarker,\n  brightest,\n  darkest,\n  highestFrequency,\n} from '../../lib/colourSamplers';\nimport Board from '../Board';\nimport ImageToGridData from '../../lib/ImageToGridData';\nimport State from '../../lib/State';\nimport { TOTAL_RECENT_COLOURS } from '../Picker';\n\nexport class ImportImage extends Element {\n  constructor(board: Board, state: State) {\n    super(\n      'span.import-image-wrapper',\n      h('button.import-image[title=\"Import image\"][tabindex=\"-1\"]', t('\uD83D\uDDBC'))\n    );\n\n    const imageInput = h<HTMLInputElement>(\n      'input[type=\"file\"][accept=\"image/*\"]'\n    );\n\n    this.onEach(['mousedown', 'touchstart'], () => imageInput.click());\n\n    imageInput.addEventListener('change', async () => {\n      const [file] = imageInput.files;\n\n      if (!file.type.match(/image/)) {\n        // TODO: alert the user\n        return;\n      }\n\n      ImageToGridData.processFile(file, state.board(), brighterAndDarker).then(\n        (colours) => {\n          const entries = [],\n            lookup = [],\n            frequency: { [key: string]: number } = {};\n\n          imageInput.value = '';\n\n          colours.forEach((colour, index) => {\n            if (!lookup.includes(colour)) {\n              lookup.push(colour);\n            }\n\n            entries.push(lookup.indexOf(colour));\n\n            if (!(colour in frequency)) {\n              frequency[colour] = 0;\n            }\n\n            frequency[colour]++;\n          });\n\n          state\n            .toString({\n              board: state.board(),\n              entries,\n              lookup,\n              palette: Object.entries(frequency)\n                .sort(([, a], [, b]) => a - b)\n                .map(([hex]) => hex)\n                .slice(0, TOTAL_RECENT_COLOURS),\n            })\n            .then((stateString) => (window.location.hash = '#' + stateString));\n        }\n      );\n    });\n\n    this.append(imageInput);\n  }\n}\n\nexport default ImportImage;\n", "import Element, { t } from '../Element';\n\nexport class Print extends Element {\n  constructor() {\n    super('button.print[title=\"Print design\"]', t('\uD83D\uDDA8'));\n\n    this.onEach(['mousedown', 'touchstart'], () => window.print());\n  }\n}\n\nexport default Print;\n", "import Element from '../Element';\nimport State from '../../lib/State';\n\nexport class Share extends Element {\n  constructor(state: State) {\n    super('button.print[title=\"Share design\"]');\n\n    // https://www.svgrepo.com/svg/27444/share\n    this.element().innerHTML =\n      '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 458.624 458.624\" width=\"95\"><path d=\"M339.588 314.529a71.683 71.683 0 0 0-38.621 11.239l-112.682-78.67a72.036 72.036 0 0 0 2.798-19.871c0-6.896-.989-13.557-2.798-19.871l109.64-76.547c11.764 8.356 26.133 13.286 41.662 13.286 39.79 0 72.047-32.257 72.047-72.047S379.378 0 339.588 0c-39.79 0-72.047 32.257-72.047 72.047 0 5.255.578 10.373 1.646 15.308l-112.424 78.491c-10.974-6.759-23.892-10.666-37.727-10.666-39.79 0-72.047 32.257-72.047 72.047s32.256 72.047 72.047 72.047c13.834 0 26.753-3.907 37.727-10.666l113.292 79.097a72.108 72.108 0 0 0-2.514 18.872c0 39.79 32.257 72.047 72.047 72.047s72.047-32.257 72.047-72.047-32.257-72.048-72.047-72.048z\"/></svg>';\n\n    this.onEach(['mousedown', 'touchstart'], async () =>\n      navigator.share({\n        text: 'Check out my Aquabeads\u00AE design!',\n        title: 'Aquabeads\u00AE Designer',\n        url: '#' + (await state.toString()),\n      })\n    );\n  }\n}\n\nexport default Share;\n", "import Board from './Board';\nimport Clear from './Actions/Clear';\nimport Element from './Element';\nimport GenerateLink from './Actions/GenerateLink';\nimport ImportImage from './Actions/ImportImage';\nimport Print from './Actions/Print';\nimport Share from './Actions/Share';\nimport State from '../lib/State';\n\nexport class Actions extends Element {\n  constructor(board: Board, state: State) {\n    super('section.actions');\n\n    const clear = new Clear(board),\n      link = new GenerateLink(state),\n      print = new Print(),\n      image = new ImportImage(board, state),\n      share = new Share(state);\n\n    this.append(clear, link, print, image);\n\n    if (navigator.share) {\n      this.append(share);\n    }\n  }\n}\n\nexport default Actions;\n", "import Element from './Element';\nimport State from '../lib/State';\n\nexport class Cell extends Element {\n  #colour: string = 'transparent';\n  #state: State;\n  #x: number;\n  #y: number;\n\n  constructor(x: number, y: number, state: State) {\n    super('.cell');\n\n    this.#state = state;\n    this.#x = x;\n    this.#y = y;\n\n    this.paint(state.getEntry(x, y));\n  }\n\n  clear(): void {\n    this.paint('transparent');\n  }\n\n  currentColour(): string {\n    return this.#colour;\n  }\n\n  paint(colour: string): void {\n    this.#colour = colour;\n    this.element().style.backgroundColor = this.#colour;\n\n    if (this.#state.getEntry(this.#x, this.#y) !== colour) {\n      this.#state.setEntry(this.#x, this.#y, this.#colour);\n    }\n  }\n}\n\nexport default Cell;\n", "import Element, { h, on } from './Element';\nimport Cell from './Cell';\nimport Picker from './Picker';\nimport State from '../lib/State';\n\nconst elementAtPoint = (x: number, y: number): HTMLElement | null => {\n    const element = document.elementFromPoint(x, y);\n\n    if (!element.matches('.cell')) {\n      return null;\n    }\n\n    return element as HTMLElement;\n  },\n  focusIn = (target) => {\n    if (!(target instanceof HTMLElement)) {\n      return;\n    }\n\n    target.classList.add('focus');\n  },\n  focusOut = (target) => {\n    if (!(target instanceof HTMLElement)) {\n      return;\n    }\n\n    target.classList.remove('focus');\n  };\n\nexport class Board extends Element {\n  #cells: Cell[][];\n  #currentTarget: HTMLElement | null;\n\n  constructor(picker: Picker, state: State) {\n    super(\n      'section.board[tabindex=\"0\"][aria-title=\"Bead board\"][aria-description=\"The board can be navigated using the keyboard (arrow keys or WASD) and the current colour bead can be placed with Enter or Space and cleared using Backspace or Delete.\"]'\n    );\n\n    const { height, width } = state.board();\n\n    this.#cells = this.generateCells(height, width, state);\n\n    this.#cells.forEach((row) =>\n      this.append(h('.row', ...row.map((cell) => cell.element())))\n    );\n\n    this.bindEvents(picker);\n  }\n\n  private bindEvents(picker: Picker): void {\n    this.on('focus', () => {\n      this.#currentTarget =\n        this.#currentTarget ??\n        (this.element().querySelector('.cell') as HTMLElement);\n\n      focusIn(this.#currentTarget);\n    });\n\n    this.on('keydown', (event) => {\n      if (\n        ![\n          'ArrowUp',\n          'ArrowLeft',\n          'ArrowDown',\n          'ArrowRight',\n          'W',\n          'A',\n          'S',\n          'D',\n          'w',\n          'a',\n          's',\n          'd',\n          ' ',\n          'Enter',\n          'Delete',\n          'Backspace',\n        ].includes(event.key)\n      ) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (!this.#currentTarget) {\n        this.#currentTarget = this.element().querySelector('.cell');\n      }\n\n      const currentRow = this.#currentTarget.parentElement,\n        currentRowIndex = [...currentRow.childNodes].indexOf(\n          this.#currentTarget\n        ),\n        previousRow = currentRow.previousElementSibling as HTMLElement | null,\n        nextRow = currentRow.nextElementSibling as HTMLElement | null,\n        previousRowTarget = previousRow?.childNodes[\n          currentRowIndex\n        ] as HTMLElement | null,\n        nextRowTarget = nextRow?.childNodes[\n          currentRowIndex\n        ] as HTMLElement | null,\n        previousTarget = this.#currentTarget\n          .previousElementSibling as HTMLElement | null,\n        nextTarget = this.#currentTarget\n          .nextElementSibling as HTMLElement | null;\n\n      (\n        [\n          [['ArrowUp', 'W', 'w'].includes(event.key), previousRowTarget],\n          [['ArrowLeft', 'A', 'a'].includes(event.key), previousTarget],\n          [['ArrowDown', 'S', 's'].includes(event.key), nextRowTarget],\n          [['ArrowRight', 'D', 'd'].includes(event.key), nextTarget],\n        ] as [boolean, HTMLElement][]\n      ).forEach(([condition, target]) => {\n        if (!condition || !target) {\n          return;\n        }\n\n        focusOut(this.#currentTarget);\n\n        this.#currentTarget = target;\n\n        focusIn(this.#currentTarget);\n      });\n\n      if ([' ', 'Enter'].includes(event.key)) {\n        const cell = this.cellFromElement(this.#currentTarget);\n\n        cell.paint(picker.currentColour());\n      }\n\n      if (['Delete', 'Backspace'].includes(event.key)) {\n        const cell = this.cellFromElement(this.#currentTarget);\n\n        cell.clear();\n      }\n    });\n\n    on(document, 'keydown', (event) => {\n      if (event.key === 'Control') {\n        this.addClass('pick');\n      }\n    });\n\n    on(document, 'keyup', (event) => {\n      if (event.key === 'Control') {\n        this.removeClass('pick');\n      }\n    });\n\n    this.onEach(['mousedown', 'mousemove'], (event: MouseEvent) =>\n      this.handleMouseEvent(event, picker)\n    );\n\n    this.onEach(['blur', 'mouseout'], () => {\n      focusOut(this.#currentTarget);\n\n      this.#currentTarget = null;\n    });\n\n    this.onEach(['touchstart', 'touchmove'], (event: TouchEvent) =>\n      this.handleTouchEvent(event, picker)\n    );\n\n    this.on('contextmenu', (event) => event.preventDefault());\n  }\n\n  private cellFromElement(element: HTMLElement): Cell | null {\n    const [cell] = this.#cells\n      .flat()\n      .filter((cell) => cell.element() === element);\n\n    return cell ?? null;\n  }\n\n  clear(): void {\n    this.#cells.flat().forEach((cell: Cell) => cell.clear());\n  }\n\n  private generateCells(rows: number, cols: number, state: State): Cell[][] {\n    return new Array(rows)\n      .fill(0)\n      .map((_, y) =>\n        new Array(cols - (y % 2)).fill(0).map((_, x) => new Cell(x, y, state))\n      );\n  }\n\n  handlePaintEvent(element: HTMLElement, picker: Picker): void {\n    const cell = this.cellFromElement(element);\n\n    if (this.element().classList.contains('pick')) {\n      picker.setCurrentColour(cell.currentColour());\n\n      return;\n    }\n\n    cell.paint(picker.currentColour());\n  }\n\n  handleMouseEvent(event: MouseEvent, picker: Picker): void {\n    const element = event.target as HTMLElement;\n\n    if (!element || !element.matches('.cell')) {\n      return;\n    }\n\n    this.handleMoveEvent(element);\n\n    if (event.buttons & 1) {\n      this.handlePaintEvent(element, picker);\n    }\n\n    if (event.buttons & 2) {\n      const cell = this.cellFromElement(element);\n\n      cell.clear();\n\n      event.stopPropagation();\n    }\n\n    event.preventDefault();\n  }\n\n  handleMoveEvent(element: HTMLElement): void {\n    focusOut(this.#currentTarget);\n\n    this.#currentTarget = element as HTMLElement;\n\n    focusIn(this.#currentTarget);\n  }\n\n  handleTouchEvent(event: TouchEvent, picker: Picker): void {\n    [...event.touches].forEach((touch) => {\n      const element = elementAtPoint(touch.pageX, touch.pageY);\n\n      if (!element || !element.matches('.cell')) {\n        return;\n      }\n\n      this.handleMoveEvent(element);\n      this.handlePaintEvent(element, picker);\n\n      event.preventDefault();\n    });\n  }\n}\n\nexport default Board;\n", "import Element, { h, t } from './Element';\n\nexport class Footer extends Element {\n  constructor() {\n    super(\n      'p.footer',\n      h(\n        'small',\n        t(\n          'This site is not affiliated with Aquabeads\u00AE or EPOCH. Aquabeads\u00AE is a registered trademark of EPOCH.'\n        )\n      )\n    );\n  }\n}\n\nexport default Footer;\n", "export class Base64 {\n  // from: https://stackoverflow.com/a/66046176/3145856\n  public static async encode(data: Uint8Array): Promise<string> {\n    // Use a FileReader to generate a base64 data URI\n    return (\n      new Promise((resolve: (base64Url: string) => any) => {\n        const reader = new FileReader();\n\n        reader.addEventListener('load', () => resolve(reader.result as string));\n\n        // initiate the read read\n        reader.readAsDataURL(new Blob([data]));\n      })\n        /**\n         * The result looks like\n         * \"data:application/octet-stream;base64,<your base64 data>\",\n         * so we split off the beginning:\n         */\n        .then((base64Url) => base64Url.split(',', 2)[1])\n    );\n  }\n\n  // from: https://stackoverflow.com/a/54123275/3145856\n  public static decode(data: string): Promise<Uint8Array> {\n    const dataUrl = `data:application/octet-binary;base64,${data}`;\n\n    return fetch(dataUrl)\n      .then((response) => response.arrayBuffer())\n      .then((buffer) => new Uint8Array(buffer));\n  }\n}\n\nexport default Base64;\n", "// This reduces the hash length by ~80%\n// see: https://developer.mozilla.org/en-US/docs/Web/API/Compression_Streams_API\n// TODO: poly/ponyfill\nexport class Compression {\n  static compress(\n    data: string,\n    encoding: string = 'deflate'\n  ): Promise<Uint8Array> {\n    const byteArray = new TextEncoder().encode(data),\n      // @ts-ignore\n      cs = new CompressionStream(encoding),\n      writer = cs.writable.getWriter();\n\n    writer.write(byteArray);\n    writer.close();\n\n    return new Response(cs.readable)\n      .arrayBuffer()\n      .then((data) => new Uint8Array(data));\n  }\n\n  static decompress(\n    byteArray: ArrayBuffer,\n    encoding: string = 'deflate'\n  ): Promise<string> {\n    // @ts-ignore\n    const cs = new DecompressionStream(encoding),\n      writer = cs.writable.getWriter();\n\n    writer.write(byteArray);\n    writer.close();\n\n    return new Response(cs.readable)\n      .arrayBuffer()\n      .then((arrayBuffer) => new TextDecoder().decode(arrayBuffer));\n  }\n\n  static isAvailable(): boolean {\n    return 'CompressionStream' in window && 'DecompressionStream' in window;\n  }\n}\n\nexport default Compression;\n", "import Base64 from './Base64';\nimport Compression from './Compression';\n\ntype BoardState = { height: number; width: number };\ntype StateMap = {\n  board: BoardState;\n  entries: number[];\n  lookup: string[];\n  palette: string[];\n};\n\nconst defaultState = (height: number = 26, width: number = 22): StateMap => ({\n  board: {\n    height,\n    width,\n  },\n  entries: new Array(height * width - Math.floor(height / 2)).fill(0),\n  lookup: ['transparent'],\n  palette: [\n    '#ff0000',\n    '#ff8800',\n    '#ffff88',\n    '#ffff00',\n    '#88ff00',\n    '#00ff88',\n    '#88ffff',\n    '#00ffff',\n    '#0088ff',\n    '#8800ff',\n    '#ff00ff',\n    '#ff0088',\n    '#ff88ff',\n    '#000000',\n    '#888888',\n    '#ffffff',\n  ],\n});\n\nexport class State {\n  #state: StateMap = defaultState();\n\n  board(): BoardState {\n    return this.#state.board;\n  }\n\n  private coordsToIndex(x: number, y: number): number {\n    const { width } = this.board();\n\n    return width * y - Math.floor(y / 2) + x;\n  }\n\n  private static async fromString(hash: string): Promise<StateMap | null> {\n    if (hash.length < 3) {\n      return null;\n    }\n\n    try {\n      return JSON.parse(atob(hash));\n    } catch (e) {\n      // Probably compressed data, lets try that next...\n    }\n\n    try {\n      return JSON.parse(\n        await Compression.decompress(await Base64.decode(hash))\n      ) as StateMap;\n    } catch (e) {\n      console.debug(`There was an error decoding the hash state:`);\n      console.debug(e);\n\n      return null;\n    }\n  }\n\n  async init(stateString: string | null = null): Promise<void> {\n    const newState = await State.fromString(stateString);\n\n    if (!newState) {\n      return;\n    }\n\n    this.#state = newState;\n  }\n\n  getEntry(x: number, y: number): string {\n    return this.#state.lookup[this.#state.entries[this.coordsToIndex(x, y)]];\n  }\n\n  palette(): string[] {\n    return this.#state.palette;\n  }\n\n  setEntry(x: number, y: number, colour: string): void {\n    if (!this.#state.lookup.includes(colour)) {\n      this.#state.lookup.push(colour);\n    }\n\n    this.#state.entries[this.coordsToIndex(x, y)] =\n      this.#state.lookup.indexOf(colour);\n  }\n\n  async toString(state = this.#state): Promise<string> {\n    if (!Compression.isAvailable()) {\n      return btoa(JSON.stringify(state));\n    }\n\n    return Compression.compress(JSON.stringify(state)).then((data) =>\n      Base64.encode(data)\n    );\n  }\n}\n\nexport default State;\n", "import './app.scss';\n\nimport Actions from './components/Actions';\nimport Board from './components/Board';\nimport Footer from './components/Footer';\nimport Picker from './components/Picker';\nimport State from './lib/State';\n\nconst state = new State();\n\nstate.init(window.location.hash.slice(1)).then(() => {\n  const picker = new Picker(state),\n    board = new Board(picker, state),\n    actions = new Actions(board, state),\n    footer = new Footer(),\n    appContainer = document.getElementById('app');\n\n  appContainer.append(\n    actions.element(),\n    board.element(),\n    picker.element(),\n    footer.element()\n  );\n});\n\n// This sucks, but it works for now - if I need this much reactivity, I should move to a proper framework.\nwindow.addEventListener('hashchange', () => window.location.reload());\n"],
  "mappings": "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",
  "names": ["SelectorType", "AttributeAction", "reName", "reEscape", "actionTypes", "AttributeAction", "unpackPseudos", "isTraversal", "selector", "SelectorType", "stripQuotesFromPseudos", "funescape", "_", "escaped", "escapedWhitespace", "high", "unescapeCSS", "str", "isQuote", "c", "isWhitespace", "parse", "subselects", "endIndex", "parseSelector", "selectorIndex", "tokens", "getName", "offset", "match", "name", "stripWhitespace", "readValueWithParenthesis", "start", "counter", "isEscaped", "pos", "slashCount", "ensureNotTraversal", "addTraversal", "type", "addSpecialAttribute", "action", "finalizeSubselector", "loop", "firstChar", "namespace", "possibleAction", "value", "ignoreCase", "quote", "sectionEnd", "valueStart", "forceIgnore", "attributeSelector", "data", "quot", "empty", "element", "h", "selector", "childNodes", "parse", "selectors", "details", "_a", "childNode", "Element", "on", "target", "event", "handler", "options", "onEach", "events", "t", "content", "_element", "_Element", "__privateAdd", "__privateSet", "classes", "nodes", "node", "__privateGet", "Element_default", "Clear", "Element_default", "board", "t", "Clear_default", "_state", "GenerateLink", "Element_default", "state", "t", "__privateAdd", "__privateSet", "on", "event", "__privateGet", "hash", "GenerateLink_default", "rgbToHex", "g", "b", "hexToRgb", "hex", "chunk", "brightnessCache", "perceivedBrightness", "r", "colourSampler", "sort", "data", "colours", "i", "end", "isTransparent", "hex", "rgbToHex", "chosen", "brighterAndDarker", "aHex", "a", "bHex", "b", "perceivedBrightness", "brightest", "darkest", "highestFrequency", "ImageToGridData", "Element_default", "file", "targetDimensions", "colourSampler", "__async", "resolve", "fileReader", "imageDataUrl", "reject", "image", "event", "imageCanvas", "targetHeight", "targetWidth", "height", "width", "squareSize", "scaledHeight", "scaledWidth", "oddOffsetX", "offsetX", "offsetY", "canvas", "context", "squareCanvas", "squareContext", "colourData", "y", "rowWidth", "rowOffsetX", "x", "canvasX", "canvasY", "squareImage", "colour", "ImageToGridData_default", "TOTAL_RECENT_COLOURS", "_input", "_recent", "_recentColours", "Picker", "Element_default", "state", "__privateAdd", "__privateSet", "h", "__privateGet", "on", "colour", "existingIndex", "empty", "element", "onEach", "Picker_default", "ImportImage", "Element_default", "board", "state", "h", "t", "imageInput", "__async", "file", "ImageToGridData_default", "brighterAndDarker", "colours", "entries", "lookup", "frequency", "colour", "index", "a", "b", "hex", "TOTAL_RECENT_COLOURS", "stateString", "ImportImage_default", "Print", "Element_default", "t", "Print_default", "Share", "Element_default", "state", "__async", "Share_default", "Actions", "Element_default", "board", "state", "clear", "Clear_default", "link", "GenerateLink_default", "print", "Print_default", "image", "ImportImage_default", "share", "Share_default", "Actions_default", "_colour", "_state", "_x", "_y", "Cell", "Element_default", "x", "y", "state", "__privateAdd", "__privateSet", "__privateGet", "colour", "Cell_default", "elementAtPoint", "x", "y", "element", "focusIn", "target", "focusOut", "_cells", "_currentTarget", "Board", "Element_default", "picker", "state", "__privateAdd", "height", "width", "__privateSet", "__privateGet", "row", "h", "cell", "_a", "event", "currentRow", "currentRowIndex", "previousRow", "nextRow", "previousRowTarget", "nextRowTarget", "previousTarget", "nextTarget", "condition", "on", "rows", "cols", "_", "Cell_default", "touch", "Board_default", "Footer", "Element_default", "h", "t", "Footer_default", "Base64", "data", "__async", "resolve", "reader", "base64Url", "dataUrl", "response", "buffer", "Base64_default", "Compression", "data", "encoding", "byteArray", "cs", "writer", "arrayBuffer", "Compression_default", "defaultState", "height", "width", "_state", "_State", "__privateAdd", "__privateGet", "x", "y", "hash", "__async", "e", "Compression_default", "Base64_default", "stateString", "newState", "__privateSet", "colour", "state", "data", "State", "State_default", "state", "State_default", "picker", "Picker_default", "board", "Board_default", "actions", "Actions_default", "footer", "Footer_default"]
}
